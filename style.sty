%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% GLOSSARY
% definitions, examples, and remarks with fancy box
% theorem, proposition, lemma, claim, corollary, conjecture
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% HYPERLINK SETUP
\RequirePackage[dvipsnames]{xcolor} % needed for hyperlink colours (duh)
\RequirePackage{hyperref}
\RequirePackage{ifthen} % easier ifelse statements
\newcommand\myshade{85}
% 3 complementary colours for each type of link
\ifthenelse{\isundefined\printmode}{
    \colorlet{mylinkcolor}{violet}
    \colorlet{mycitecolor}{YellowOrange}
    \colorlet{myurlcolor}{Aquamarine}
}{
    \colorlet{mylinkcolor}{black}
    \colorlet{mycitecolor}{black}
    \colorlet{myurlcolor}{black}
}
\hypersetup{
  linkcolor  = mylinkcolor!\myshade!black,
  citecolor  = mycitecolor!\myshade!black,
  urlcolor   = myurlcolor!\myshade!black,
  colorlinks = true,
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CLEVEREF SETUP
\RequirePackage{amsthm} % NEEDS TO BE LOADED BEFORE CLEVEREF
\RequirePackage{amsmath} % NEEDS TO BE LOADED BEFORE CLEVEREF
\RequirePackage{thmtools} % NEEDS TO BE LOADED BEFORE CLEVEREF
\RequirePackage{cleveref} % NEEDS TO BE LOADED BEFORE `newtheorem` DEFINITIONS
\creflabelformat{equation}{#2\textup{#1}#3} % Removes brackets when referencing equations
\newcommand{\crefrangeconjunction}{--} % Use en-dash when referencing multiple items in a range
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ENVIRONMENT SETUP
\newcommand\proofsymbolstart{\blacktriangleright}
\newcommand\proofsymbolend{\blacktriangleleft}
\ifthenelse{\isundefined\printmode}{%
    \colorlet{boxlinecolor}{lightgray}
    \colorlet{boxbg}{lightgray!20}
    \colorlet{theoremcolor}{darkgray}
    \newcommand\boxlinewidth{3pt}
}{%
    \colorlet{boxlinecolor}{black}
    \colorlet{boxbg}{white}
    \colorlet{theoremcolor}{black}
    \newcommand\boxlinewidth{2pt}
}

\RequirePackage[framemethod=tikz]{mdframed} % mdframed is used to draw the boxes
\RequirePackage[T1]{fontenc} % Required for sans serifs (I think)
\mdfdefinestyle{shadedbox}{%
    frametitlefont=\bfseries\sffamily,
    theoremtitlefont=\mdseries,
    theoremseparator={},
    frametitlebelowskip=0pt,
    topline=false,  
    rightline=false,  
    bottomline=false,  
    leftline=true,  
    linecolor=boxlinecolor,  
    linewidth=\boxlinewidth,  
    backgroundcolor=boxbg
}

% Use the fancy box for definitions, examples, and remarks
\mdtheorem[style=shadedbox]{definition}{Definition}
\mdtheorem[style=shadedbox]{example}{Example}
\mdtheorem[style=shadedbox]{remark}{Remark}

\newtheoremstyle{customtheorem}% name of the style to be used
  {\topsep}% measure of space to leave above the theorem. E.g.: 3pt
  {\topsep}% measure of space to leave below the theorem. E.g.: 3pt
  {\itshape}% name of font to use in the body of the theorem
  {0pt}% measure of space to indent
  {\color{theoremcolor}\bfseries\sffamily}% name of head font
  {.}% punctuation between head and body
  { }% space after theorem head; " " = normal interword space
  {$\proofsymbolstart$ \thmname{#1}\thmnumber{ #2}\textmd{\thmnote{ #3}}}

% Theorems, propositions, lemmas, claims, conjectures, and corollaries all
% use the standard theorem style
\theoremstyle{customtheorem}
\newtheorem{theorem}{Theorem}[section]
\theoremstyle{customtheorem}
\newtheorem{proposition}[theorem]{Proposition}
\theoremstyle{customtheorem}
\newtheorem{lemma}[theorem]{Lemma}
\theoremstyle{customtheorem}
\newtheorem{claim}[theorem]{Claim}
\theoremstyle{customtheorem}
\newtheorem{conjecture}[theorem]{Conjecture}
\theoremstyle{customtheorem}
\newtheorem{corollary}[theorem]{Corollary}

% These are changes to the proof environment
\let\oldproofname=\proofname
% Changes the formatting for the 'Proof.' text at the start of the environment
\renewcommand{\proofname}{\color{theoremcolor}\sffamily\bfseries\upshape{\oldproofname}} 
% Changes the qed symbol to be a left pointing triangle
\renewcommand{\qedsymbol}{\color{theoremcolor}$\proofsymbolend$}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{enumitem}
\setlist{nosep}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{changepage}
\renewenvironment{abstract}[1][2em]
{
\begin{adjustwidth}{#1}{#1}
\bfseries
Abstract. \mdseries
}
{
\end{adjustwidth}
\par
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SECTIONS
\RequirePackage[sf,bf]{titlesec} % loads titlesec with sanserif family and bold face
\RequirePackage{graphicx} % needed for colorbox

\titleformat{\section}
{\sffamily\bfseries\Large}
{\colorbox{black}{\textcolor{white}\thesection}}
{1em}{}[\vspace{-.15em}\titlerule]

\RequirePackage{pgfornament}
\newcommand{\custommaketitle}{\maketitle\vskip-1em\noindent\pgfornament[width=\textwidth]{88}\par\vskip1.5em}
\makeatletter
\def\title#1{\gdef\@title{\vskip-2em#1}}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MISC
\RequirePackage{amssymb}
% Make emptyset symbol nicer (you can still access it via \oldemptyset)
\let\oldemptyset\emptyset
\let\emptyset\varnothing

% Proofsubparagraph definition
% Commands using @ need to go between \makeatletter and \makeatother
\makeatletter
\newcommand{\proofsubparagraph}{\@startsection{subparagraph}{5}{0pt}{3.25ex plus 1ex minus .2ex}{-1em}{\color{theoremcolor}\bfseries\normalsize\sffamily}}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%